# Component 기반의 프레임워크 개발

![plantuml.svg](plantuml.svg)

UI의 모든 요소를 컴포넌트화하는 것이 가장 이상적이라고 생각했기 때문에, 우리는 `WComponent`를 만들었습니다. 그리고 포커스 관리와 키 이벤트 처리를 효율적으로 하기 위해 `Window`, `WComposite`, `WSystem`이라는 계층 구조를 도입했습니다.

`WComposite`는 여러 개의 `Window`를 관리하는 클래스로, 안드로이드의 `Activity`와 유사한 역할을 했습니다. 다만, 안드로이드의 `Activity`는 라이프사이클을 통해 생성과 소멸을 관리하는 반면, 우리는 객체를 미리 생성해 놓고 계속 사용하며 화면에 보여지는 것과 보여지지 않는 것을 관리하는 방식을 택했습니다.

이 구조는 기본적으로 잘 동작했지만, 이후 개발 과정에서 `WComposite`를 이전 상태로 되돌려야 하는 경우가 빈번히 발생했습니다. 이러한 상황에서 여러 이슈가 발생했고, 이를 해결하는 데 많은 시간을 소비해야 했습니다.

### **네비게이션**
인덱스 관리는 반복적이고 번거로운 작업이었습니다. 이를 공통화하기 위해 Navigator를 만들었습니다.
![plantuml-2.svg](plantuml-2.svg)
UI의 모든 요소는 고유한 인덱스를 가지고 있으며, Navigator는 이 인덱스를 관리하여 UI를 제어합니다. 예를 들어, 여러 개의 버튼이 있을 때, 특정 버튼에 포커스가 있는 상태에서 왼쪽이나 오른쪽 버튼을 누르면 인접한 버튼으로 포커스가 이동합니다. 상황에 따라 포커스가 버튼의 끝에 도달했을 때, 반대쪽 끝으로 순환되거나 멈추도록 동작을 설정할 수 있습니다.
안드로이드 리스트뷰에서도 이와 유사하게 포커스를 관리하고 있습니다.
Navigator는 프레임웍에서 가장 중요한 역할을 합니다.

Android TV 앱 개발 시에도 인덱스 관리가 필요합니다. Android에서는 포커스와 인덱스를 자체적으로 관리하지만, 고객의 요구사항은 기본 네비게이션 시나리오를 벗어나는 경우가 많았습니다. 이를 커스터마이징하기 위해 우리는 Navigator를 도입하여 구현했습니다.